<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link href="css/google-map.css" rel="stylesheet"/>
  <link href="css/bootstrap.min.css" rel="stylesheet"/>
  <link href="css/main.css" rel="stylesheet"/>
</head>
<body style="background-color:lightgrey" onload="autocompleteAddress()">
  <div class="header">
    <table>
      <tbody>
        <tr>
          <td>
           <select>
            <option value="1">[01] Bến Thành- BX Chợ Lớn</option>
            <option value="2">[02] Bến Thành- BX Miền Tây</option>
            <option value="3">[03] Bến Thành- Thạnh Lộc</option>
            <option value="4">[04] Bến Thành- Cộng Hòa- An Sương</option>
            <option value="135">[05] Bến xe Chợ Lớn - Biên Hòa</option>
            <option value="5">[06] Bến xe Chợ Lớn- Đại học Nông Lâm</option>
            <option value="6">[07] Bến xe Chợ Lớn- Gò vấp</option>
            <option value="7">[08] Bến xe Quận 8- Đại học Quốc Gia</option>
            <option value="8">[09] Chợ Lớn- Quốc Lộ 1A- Hưng Long</option>
            <option value="9">[10] Đại học Quốc Gia- Bến xe Miền Tây</option>
            <option value="109">[100] Bến xe Củ Chi - Cầu Tân Thái</option>
            <option value="110">[101] Bến xe Chợ Lớn - Bến Phú Định</option>
            <option value="111">[102] Bến Thành - Nguyễn Văn Linh - Bến xe Miền Tây</option>
            <option value="112">[103] Bến xe Chợ Lớn - Bến xe Ngã 4 Ga</option>
            <option value="113">[104] Bến xe An Sương - Đại học Nông Lâm</option>
            <option value="117">[107]  Bến xe Củ Chi - Bố Heo</option>
            <option value="10">[11] Bến Thành- Đầm Sen</option>
            <option value="118">[110] Phú Xuân – Hiệp Phước</option>
            <option value="136">[12] Bến Thành – Thác Giang Điền</option>
            <option value="119">[122] Bến xe An Sương - Tân Quy</option>
            <option value="120">[123] Phú Mỹ Hưng (khi H) - Quận 1</option>
            <option value="121">[124] Phú Mỹ Hưng (khu S) - Quận 1</option>
            <option value="122">[126] Bến xe Củ Chi - Bình Mỹ</option>
            <option value="11">[13] Bến Thành- Bến xe Củ Chi</option>
            <option value="123">[139] Bến xe Miền Tây - Phú Xuân</option>
            <option value="12">[14] Miền Đông- 3 tháng 2- Miền Tây</option>
            <option value="124">[140] Công viên 23/9 - Phạm Thế Hiển - Ba Tơ</option>
            <option value="125">[141] KDL BCR - Long Trường - KCX Linh Trung 2</option>
            <option value="126">[144] Bến xe Miền Tây - Chợ Lớn - CV Đầm Sen - CX Nhiêu Lộc</option>
            <option value="127">[145]  Bến xe Chợ Lớn - Chợ Hiệp Thành</option>
            <option value="128">[146] Bến xe Miền Đông - Chợ Hiệp Thành</option>
            <option value="129">[148] Bến xe Miền Tây - Gò Vấp</option>
            <option value="130">[149] Công viên 23/9 – Chợ Bình Hưng Hòa</option>
            <option value="13">[15] Bến Phú Định- Đầm Sen</option>
            <option value="131">[150] Bến xe Chợ Lớn - Ngã 3 Tân Vạn</option>
            <option value="115">[151] Bến xe Miền Tây - Bến xe An Sương</option>
            <option value="114">[152] Khu dân cư Trung Sơn – Bến Thành - Sân bay Tân Sơn Nhất</option>
            <option value="14">[16] Bến xe Chợ Lớn – ĐH Công nghiệp thực phẩm</option>
            <option value="15">[17] Bến Xe Chợ Lớn - ĐH Sài Gòn - KCX Tân Thuận</option>
            <option value="16">[18] Bến Thành - Chợ Hiệp Thành</option>
            <option value="17">[19] Bến Thành - Khu Chế Xuất Linh Trung - Đại Học Quốc Gia</option>
            <option value="18">[20] Bến Thành - Nhà Bè</option>
            <option value="19">[22] Bến Xe Quận 8 - KCN Lê Minh Xuân</option>
            <option value="20">[23] Bến xe Chợ Lớn - Ngã 3 Giồng - Cầu Lớn</option>
            <option value="21">[24] Bến Xe Miền Đông - Hóc Môn</option>
            <option value="22">[25] Bến Xe Quận 8 - Khu Dân Cư Vĩnh Lộc A</option>
            <option value="23">[26] Bến Xe Miền Đông - Bến Xe An Sương</option>
            <option value="24">[27] Bến Thành - Âu Cơ - An Sương</option>
            <option value="25">[28] Bến Thành - Chợ Xuân Thới Thượng</option>
            <option value="26">[29] Bến Phà Cát Lái - Chợ Nông Sản Thủ Đức</option>
            <option value="27">[30] Chợ Tân Hương - Đại học Quốc tế</option>
            <option value="28">[31] Khu dân cư Tân Quy - Bến Thành - Khu dân cư Bình Lợi</option>
            <option value="29">[32] Bến Xe Miền Tây - Bến Xe Ngã Tư Ga</option>
            <option value="30">[33] Bến Xe An Sương - Suối Tiên - Đại học Quốc Gia</option>
            <option value="31">[34] Bến Thành - Đại Học Công Nghệ Sài Gòn</option>
            <option value="32">[35] Tuyến xe buýt Quận 1</option>
            <option value="33">[36] Bến Thành - Thới An</option>
            <option value="34">[37] Cảng Quận 4 - Nhơn Đức</option>
            <option value="35">[38] KDC Tân Quy - Đầm Sen</option>
            <option value="36">[39] Bến Thành - Võ Văn Kiệt - Bến Xe Miền Tây</option>
            <option value="37">[40] Bến xe Miền Đông- Bến xe Ngã Tư Ga</option>
            <option value="38">[41] Bến xe Miền Tây- Ngã tư Bốn xã- Bến xe An Sương</option>
            <option value="137">[42] Chợ Cầu Muối-Chợ nông sản Thủ Đức</option>
            <option value="39">[43] Bến xe Miền Đông- Phà Cát Lái</option>
            <option value="40">[44] Cảng Quận 4- Bình Quới</option>
            <option value="41">[45] Bến xe Quận 8- Bến Thành- Bến xe Miền Đông</option>
            <option value="42">[46] Cảng Quận 4- Bến Thành- Bến Mễ Cốc</option>
            <option value="44">[47]  Bến xe Chợ Lớn - Quốc lộ 50 - Hưng Long</option>
            <option value="45">[48] Siêu thị CMC - Công viên phần mềm Quang Trung</option>
            <option value="46">[50] Đại học Bách khoa - Bến Thành - Đại học Quốc gia</option>
            <option value="47">[51] Bến xe Miền Đông - Bình Hưng Hòa</option>
            <option value="48">[52]  Bến Thành - Đại học Quốc tế</option>
            <option value="49">[53] Lê Hồng Phong - Đại học Quốc gia</option>
            <option value="50">[54] Bến xe Miền Đông - Bến xe Chợ Lớn</option>
            <option value="51">[55] Công viên phần mềm Quang Trung - Khu Công nghệ cao (Q9)</option>
            <option value="52">[56] Bến xe Chợ Lớn - Đại học Giao thông Vận tải</option>
            <option value="53">[57] Chợ Phước Bình - Trường THPT Hiệp Bình</option>
            <option value="54">[58] Bến xe Ngã 4 Ga - Bình Mỹ</option>
            <option value="55">[59] Bến xe Quận 8 - Bến xe Ngã 4 Ga</option>
            <option value="56">[60] Bến xe An Sương - KCN Lê Minh Xuân</option>
            <option value="138">[60-1] BX Miền Tây - BX Biên Hòa</option>
            <option value="139">[60-3] Bến xe Miền Đông – Khu Công nghiệp Nhơn Trạch</option>
            <option value="140">[60-4] Bến xe Miền Đông - Bến xe Hố Nai</option>
            <option value="57">[61] Bến xe Chợ Lớn - KCN Lê Minh Xuân</option>
            <option value="141">[61-1] Thủ Đức - Dĩ An</option>
            <option value="142">[61-3] Bến xe An Sương – Thủ Dầu Một</option>
            <option value="143">[61-4] Bến Dược – Dầu Tiếng</option>
            <option value="144">[61-6] Bến Thành - Khu Du lịch Đại Nam</option>
            <option value="145">[61-7] Bến đò Bình Mỹ - Bến xe Bình Dương</option>
            <option value="146">[61-8] Bến xe Miền Tây – Khu Du lịch Đại Nam</option>
            <option value="58">[62] Bến xe Quận 8 -Thới An</option>
            <option value="147">[62-10] Bến xe Chợ Lớn - Thanh Vĩnh Đông</option>
            <option value="148">[62-11] Bến xe Miền Tây - Tân Tập</option>
            <option value="149">[62-2]  Bến xe Chợ Lớn - Ngã 3 Tân Lân</option>
            <option value="150">[62-3] Bến Củ Chi - Bến xe Hậu Nghĩa</option>
            <option value="151">[62-4] Thị trấn Tân Túc - Chợ Bến Lức</option>
            <option value="152">[62-5] Bến xe An Sương - Bến xe Hậu Nghĩa</option>
            <option value="153">[62-7] Bến xe Chợ Lớn - Bến xe Đức Huệ</option>
            <option value="154">[62-8]  Bến xe Chợ Lớn - Bến xe Tân An</option>
            <option value="155">[62-9] Bến xe Quận 8 – Cầu Nổi</option>
            <option value="59">[64] Bến xe Miền Đông - Đầm Sen</option>
            <option value="75">[65] Bến Thành - CMT8 - Bến xe An Sương</option>
            <option value="76">[66] Bến xe Chợ Lớn - Bến xe An Sương</option>
            <option value="77">[68] Bến xe Chợ Lớn - KCX Tân Thuận</option>
            <option value="78">[69] Công viên 23/9 – KCN Tân Bình</option>
            <option value="79">[70] Tân Quy - Bến Súc</option>
            <option value="156">[70-1] Bến xe Củ Chi - Bến xe Gò Dầu</option>
            <option value="157">[70-2]  BX Củ Chi – Hòa Thành</option>
            <option value="158">[70-3] Bến Thành – Mộc Bài</option>
            <option value="159">[70-5] Bố Heo - Lộc Hưng</option>
            <option value="80">[71]  Bến xe An Sương - Phật Cô Đơn</option>
            <option value="81">[72] Công viên 23/9 – Hiệp Phước</option>
            <option value="82">[73] Chợ Bình Chánh - KCN Lê Minh Xuân</option>
            <option value="86">[74] Bến xe An Sương - Bến xe Củ Chi</option>
            <option value="87">[75] Sài Gòn - Cần Giờ</option>
            <option value="88">[76]  Long Phước - Suối Tiên - Đền Vua Hùng</option>
            <option value="89">[77] Đồng Hòa – Cần Thạnh</option>
            <option value="90">[78] Thới An – Hóc Môn</option>
            <option value="91">[79] Bến xe Củ Chi - Đền Bến Dược</option>
            <option value="92">[80] Bến xe Chợ Lớn - Ba Làng</option>
            <option value="93">[81] Bến xe Chợ Lớn - Lê Minh Xuân</option>
            <option value="94">[82] Bến xe Chợ Lớn - Ngã 3 Tân Qúy Tây</option>
            <option value="95">[83]  Bến xe Củ Chi - Cầu Thầy Cai</option>
            <option value="96">[84] Bến xe Chợ Lớn - Tân Túc</option>
            <option value="132">[85] Bến xe An Sương- Hậu Nghĩa</option>
            <option value="97">[86]  Bến Thành - Đại học Tôn Đức Thắng</option>
            <option value="98">[87] Bến xe Củ Chi - An Nhơn Tây</option>
            <option value="99">[88] Bến Thành - Chợ Long Phước</option>
            <option value="100">[89] Đại học Nông Lâm - Trường THPT Hiệp Bình</option>
            <option value="101">[90] Phà Bình Khánh - Cần Thạnh</option>
            <option value="102">[91] Bến xe Miền Tây - Chợ nông sản Thủ Đức</option>
            <option value="103">[92] Bến xe Chợ Lớn - Chợ Bình Chánh</option>
            <option value="104">[93] Bến Thành - Đại học Nông Lâm</option>
            <option value="105">[94]  Bến xe Chợ Lớn - Bến xe Củ Chi</option>
            <option value="106">[95] Bến xe Miền Đông - KCN Tân Bình</option>
            <option value="107">[96] Bến Thành - Chợ Bình Điền</option>
            <option value="108">[99] Chợ Thạnh Mỹ Lợi - Đại học Quốc gia</option>
        </select>
    </td>
    <td>Lượt đi: <input id="chckLuotDi" type="checkbox" name="chckLuotDi" checked="checked"/></td>
    <td>
      <input class="button" type="button" value="Hiển thị lộ trình" onclick=""/>
    </td>
    <td>
        <form action="#">
            <input id="autocomplete" placeholder="Enter your address"
             type="text" style="width:300px"></input>
            <button type="submit" name="btAction" value="Search" onclick="getAddressLocation()">Search</button>
        </form>
    </td>
</tr>
</tbody>
</table>
</div>

<div class="container">
    <div class="row">
      <div class="col-md-3">
        <strong>THÔNG TIN XE BUÝT</strong>
        <button type="submit" onclick="showmap()">Click</button>
        <button type="submit" onclick="WriteFile()">getData</button>
    </div>
    <div class="col-md-9">
        <div id="map-canvas"></div>
    </div>
</div>
</div>

<script src="https://maps.googleapis.com/maps/api/js"></script>
<script src="javascript/google-map.js"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places"></script>

<script>
    var geocoder;
    document.addEventListener("DOMContentLoaded", function(event) { 
      geocoder = new google.maps.Geocoder();
    });

    function getAddressLocation(){
        var searchValue = document.getElementById("autocomplete").value;
        console.log(searchValue);
        
        geocoder.geocode( { 'address': searchValue}, function(results, status) {

          if (status === google.maps.GeocoderStatus.OK) {
            var latitude = results[0].geometry.location.lat();
            var longitude = results[0].geometry.location.lng();
            console.log(latitude + " " + longitude);

            getPathFromServer();


         }
        }); 
    }

    function getPathFromServer() {
        if (window.XMLHttpRequest) {
            xmlhttp = new XMLHttpRequest();
        }
        else {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
                var data = xhr.responseText;
                console.log(data);
                console.log('OK');
            }
        };
        alert('aa');
        xmlhttp.open("GET", "ControllerServlet", true);
        xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        xmlhttp.send(null);
    }

  

</script>

</body>
</html>